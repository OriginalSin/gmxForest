var forest=function(t){"use strict";function e(){}function a(t,e){for(var a in e)t[a]=e[a];return t}function n(t,e){for(var a in e)t[a]=1;return t}function s(t,e){return 0===e&&t(),function(){--e||t()}}function r(t,e){e.appendChild(t)}function o(t,e,a){e.insertBefore(t,a)}function i(t){t.parentNode.removeChild(t)}function l(t,e){for(var a=0;a<t.length;a+=1)t[a]&&t[a].d(e)}function c(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function d(){return document.createComment("")}function m(t,e,a){t.addEventListener(e,a,!1)}function h(t,e,a){t.removeEventListener(e,a,!1)}function v(t,e,a){t.setAttribute(e,a)}function f(t,e){t.data=""+e}function g(t,e){t._handlers=Object.create(null),t._bind=e._bind,t.options=e,t.root=e.root||t,t.store=e.store||t.root.store}function p(t){t()}function _(t){for(;t&&t.length;)t.shift()()}var y={destroy:function(t){this.destroy=e,this.fire("destroy"),this.set=e,this._fragment.d(!1!==t),this._fragment=null,this._state={}},get:function(){return this._state},fire:function(t,e){var a=t in this._handlers&&this._handlers[t].slice();if(a)for(var n=0;n<a.length;n+=1){var s=a[n];if(!s.__calling)try{s.__calling=!0,s.call(this,e)}finally{s.__calling=!1}}},on:function(t,e){var a=this._handlers[t]||(this._handlers[t]=[]);return a.push(e),{cancel:function(){var t=a.indexOf(e);~t&&a.splice(t,1)}}},set:function(t){this._set(a({},t)),this.root._lock||(this.root._lock=!0,_(this.root._beforecreate),_(this.root._oncreate),_(this.root._aftercreate),this.root._lock=!1)},_recompute:e,_set:function(t){var e=this._state,n={},s=!1;for(var r in t)this._differs(t[r],e[r])&&(n[r]=s=!0);s&&(this._state=a(a({},e),t),this._recompute(n,this._state),this._bind&&this._bind(n,this._state),this._fragment&&(this.fire("state",{changed:n,current:this._state,previous:e}),this._fragment.p(n,this._state),this.fire("update",{changed:n,current:this._state,previous:e})))},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_differs:function(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}};var k={sort:function(t){var e=this.get().sortType;this.set({sortType:"desc"===e?"asc":"desc",sortKey:t}),this.setCurrPage(1)},checkReverse:function(t){var e={},a=t.ctrlKey,n=t.target.checked;if(a||n){var s=this.get(),r=s.items,o=s.hashCols,i=s.checked,l=o.gmx_id;r.forEach(function(t){var n=t[l];a&&i[n]||(e[n]=!0)})}this.set({checked:e}),this.root.set({checked:e})},checkMe:function(t){var e=this.get().checked;e[t]?delete e[t]:e[t]=!0,this.set({checked:e}),this.root.set({checked:e})},sortMe:function(t,e,a,n){var s=a[e];return t.sort(function(t,e){var a=e[s],r=t[s];return(a<r?-1:a>r?1:0)*("desc"===n?-1:1)})},pageTo:function(t){var e=this.get().pageFrom;return this.set({pageCurr:t}),t=t<1?1:t>e?e:t,this.setCurrPage(t),t},setCurrPage:function(t){var e=this.get(),a=e.items,n=e.hashCols,s=e.pageCurr,r=e.pagesize,o=e.sortKey,i=e.sortType,l=r*((t=t||s)-1),c=(o?this.sortMe(a,o,n,i):a).slice(l,l+r),u=a.length/r,d=Math.floor(u);this.set({tableItems:c,pageCurr:t,pageFrom:d+(u>d?1:0)})}};function b(t){t.changed,t.current,t.previous;this.setCurrPage()}function N(t,e){var a,n,s,l,d,g,p,_,y,k,b,N,x,C=e.it[e.hashCols.gmx_id];return{c:function(){a=c("tr"),n=c("td"),s=c("input"),d=u("\n\t\t\t"),g=c("td"),p=c("span"),_=u(C),y=u("\n\t\t\t"),k=c("td"),b=c("span"),(x=c("span")).innerHTML='<svg class="svgIcon svelte-zkpsa2"><use xlink:href="#zoom-to-feature"></use></svg>',s._svelte={component:t,ctx:e},m(s,"change",I),s.checked=l=e.checked[e.it[e.hashCols.gmx_id]],v(s,"type","checkbox"),s.className="svelte-zkpsa2",n.className="c1 svelte-zkpsa2",g.className="c2 svelte-zkpsa2",b.className=N="status "+(e.it[e.hashCols.FRSTAT]>0?"checked":"")+" svelte-zkpsa2",x.className="leaflet-gmx-iconSvg svgIcon svelte-zkpsa2",k.className="c3",a.className="item svelte-zkpsa2"},m:function(t,e){o(a,t,e),r(n,a),r(s,n),r(d,a),r(g,a),r(p,g),r(_,p),r(y,a),r(k,a),r(b,k),r(x,k)},p:function(t,e){s._svelte.ctx=e,(t.checked||t.tableItems||t.hashCols)&&l!==(l=e.checked[e.it[e.hashCols.gmx_id]])&&(s.checked=l),(t.tableItems||t.hashCols)&&C!==(C=e.it[e.hashCols.gmx_id])&&f(_,C),(t.tableItems||t.hashCols)&&N!==(N="status "+(e.it[e.hashCols.FRSTAT]>0?"checked":"")+" svelte-zkpsa2")&&(b.className=N)},d:function(t){t&&i(a),h(s,"change",I)}}}function x(t,e,a){var n=Object.create(t);return n.it=e[a],n.each_value=e,n.it_index=a,n}function I(t){var e=this._svelte,a=e.component,n=e.ctx;a.checkMe(n.it[n.hashCols.gmx_id])}function C(t){var e=this;g(this,t),this._state=a({sortType:"desc",sortKey:"gmx_id",reverse:!1,pageCurr:1,pagesize:15,pageFrom:0,tableItems:[],items:[],checked:{},hashCols:[]},t.data),this._intro=!!t.intro,this._handlers.state=[b],t.root||(this._oncreate=[]),this._fragment=function(t,e){var a,n,s,d,g,_,y,k,b,I,C,w,T,q,z,F,j,D,L,R,O,S,P,M,E,K,A,G,H;function V(e){t.checkReverse(e)}function B(e){t.sort("gmx_id")}function W(e){t.sort("FRSTAT")}for(var Q=e.tableItems,U=[],J=0;J<Q.length;J+=1)U[J]=N(t,x(e,Q,J));function X(a){t.pageTo(e.pageCurr-1)}function Y(e){t.pageTo(this.value)}function Z(a){t.pageTo(e.pageCurr+1)}return{c:function(){a=c("div"),n=c("table"),s=c("tr"),d=c("th"),g=c("input"),_=u("\n\t\t\t"),(y=c("th")).innerHTML="<span>Id</span>",b=u("\n\t\t\t"),(I=c("th")).innerHTML="<span>Статус</span>",w=u("\n");for(var t=0;t<U.length;t+=1)U[t].c();T=u("\n\t\t"),q=c("tr"),z=c("td"),(F=c("button")).textContent="назад",D=u("\n\t\t\t\t"),L=c("span"),R=u("Стр. "),O=c("input"),S=u(" из "),P=u(e.pageFrom),M=u("\n\t\t\t\t"),(E=c("button")).textContent="вперед",A=u("\n\t\t\t\t"),(G=c("div")).innerHTML='<div class="-loading-inner"></div>',m(g,"click",V),g.checked=e.reverse,v(g,"type","checkbox"),g.value="on",g.className="svelte-zkpsa2",d.className="c1 svelte-zkpsa2",m(y,"click",B),y.className=k="c2 sorting \n\t\t\t\t\t"+("gmx_id"===e.sortKey?"desc"===e.sortType?"sorting-desc":"sorting-asc":"")+"\n\t\t\t\t\t svelte-zkpsa2",m(I,"click",W),I.className=C="c3 sorting \n\t\t\t\t\t"+("FRSTAT"===e.sortKey?"desc"===e.sortType?"sorting-desc":"sorting-asc":"")+"\n\t\t\t\t\t svelte-zkpsa2",s.className="head svelte-zkpsa2",m(F,"click",X),F.disabled=j=1===e.pageCurr,m(O,"change",Y),v(O,"type","number"),O.value=e.pageCurr,O.className="svelte-zkpsa2",L.className="pageInfo svelte-zkpsa2",m(E,"click",Z),E.disabled=K=e.pageFrom===e.pageCurr,G.className="-loading",z.colSpan="3",z.className="svelte-zkpsa2",q.className="pagination svelte-zkpsa2",n.className="table svelte-zkpsa2",a.className="tableContect svelte-zkpsa2"},m:function(t,e){o(a,t,e),r(n,a),r(s,n),r(d,s),r(g,d),r(_,s),r(y,s),r(b,s),r(I,s),r(w,n);for(var i=0;i<U.length;i+=1)U[i].m(n,null);r(T,n),r(q,n),r(z,q),r(F,z),r(D,z),r(L,z),r(R,L),r(O,L),r(S,L),r(P,L),r(M,z),r(E,z),r(A,z),r(G,z),H=!0},p:function(a,s){if(e=s,a.reverse&&(g.checked=e.reverse),(a.sortKey||a.sortType)&&k!==(k="c2 sorting \n\t\t\t\t\t"+("gmx_id"===e.sortKey?"desc"===e.sortType?"sorting-desc":"sorting-asc":"")+"\n\t\t\t\t\t svelte-zkpsa2")&&(y.className=k),(a.sortKey||a.sortType)&&C!==(C="c3 sorting \n\t\t\t\t\t"+("FRSTAT"===e.sortKey?"desc"===e.sortType?"sorting-desc":"sorting-asc":"")+"\n\t\t\t\t\t svelte-zkpsa2")&&(I.className=C),a.checked||a.tableItems||a.hashCols){Q=e.tableItems;for(var r=0;r<Q.length;r+=1){var o=x(e,Q,r);U[r]?U[r].p(a,o):(U[r]=N(t,o),U[r].c(),U[r].m(n,T))}for(;r<U.length;r+=1)U[r].d(1);U.length=Q.length}a.pageCurr&&j!==(j=1===e.pageCurr)&&(F.disabled=j),a.pageCurr&&(O.value=e.pageCurr),a.pageFrom&&f(P,e.pageFrom),(a.pageFrom||a.pageCurr)&&K!==(K=e.pageFrom===e.pageCurr)&&(E.disabled=K)},i:function(t,e){H||this.m(t,e)},o:p,d:function(t){t&&i(a),h(g,"click",V),h(y,"click",B),h(I,"click",W),l(U,t),h(F,"click",X),h(O,"change",Y),h(E,"click",Z)}}}(this,this._state),this.root._oncreate.push(function(){b.call(e,{changed:n({},e._state),current:e._state}),e.fire("update",{changed:n({},e._state),current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),_(this._oncreate)),this._intro=!0}a(C.prototype,y),a(C.prototype,k);function w(t){var e=t.changed,a=t.current;t.previous;if(e.clicked)if(a.clicked){var n=this.get().cols;this.setSelection(n[0])}else{var s=this.get().value;this.setValue(s)}}function T(t,e){var a,n,s,l,d=e.it;return{c:function(){a=c("option"),n=u(d),a.__value=s=e.it,a.value=a.__value,a.selected=l=e.colName===e.it},m:function(t,e){o(a,t,e),r(n,a)},p:function(t,e){t.cols&&d!==(d=e.it)&&f(n,d),t.cols&&s!==(s=e.it)&&(a.__value=s),a.value=a.__value,(t.colName||t.cols)&&l!==(l=e.colName===e.it)&&(a.selected=l)},d:function(t){t&&i(a)}}}function q(t,e){for(var a,n=e.cols,s=[],r=0;r<n.length;r+=1)s[r]=T(0,F(e,n,r));function u(e){t.setSelection(this.options[this.selectedIndex].value)}return{c:function(){a=c("select");for(var t=0;t<s.length;t+=1)s[t].c();m(a,"change",u),a.name=e.key,a.className="gmx-sidebar-select-with-addon svelte-1qsv1jq"},m:function(t,e){o(a,t,e);for(var n=0;n<s.length;n+=1)s[n].m(a,null)},p:function(t,e){if(t.cols||t.colName){n=e.cols;for(var r=0;r<n.length;r+=1){var o=F(e,n,r);s[r]?s[r].p(t,o):(s[r]=T(0,o),s[r].c(),s[r].m(a,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=n.length}t.key&&(a.name=e.key)},d:function(t){t&&i(a),l(s,t),h(a,"change",u)}}}function z(t,e){var a;function n(e){t.setValue(e.target.value)}return{c:function(){m(a=c("input"),"change",n),v(a,"type","text"),a.className="gmx-sidebar-input-with-addon svelte-1qsv1jq",a.name=e.key,a.value=e.value},m:function(t,e){o(a,t,e)},p:function(t,e){t.key&&(a.name=e.key),t.value&&(a.value=e.value)},d:function(t){t&&i(a),h(a,"change",n)}}}function F(t,e,a){var n=Object.create(t);return n.it=e[a],n.each_value=e,n.it_index=a,n}function j(t){var e=this;g(this,t),this._state=a({title:"",value:"",colName:"",clicked:!1,cols:[]},t.data),this._intro=!!t.intro,this._handlers.state=[w],t.root||(this._oncreate=[]),this._fragment=function(t,e){var a,n,s,l,d,v,g,_,y;function k(t){return t.clicked?q:z}var b=k(e),N=b(t,e);function x(a){t.set({clicked:!e.clicked})}return{c:function(){a=c("div"),n=c("div"),s=u(e.title),l=u("\n\t"),d=c("div"),v=c("div"),N.c(),g=u("\n\t\t\t"),_=c("button"),n.className="gmx-sidebar-label svelte-1qsv1jq",m(_,"click",x),_.className="gmx-addon-button svelte-1qsv1jq",_.title="выбрать из таблицы атрибутов",a.className="gmx-sidebar-labeled-block svelte-1qsv1jq"},m:function(t,e){o(a,t,e),r(n,a),r(s,n),r(l,a),r(d,a),r(v,d),N.m(v,null),r(g,v),r(_,v),y=!0},p:function(a,n){e=n,a.title&&f(s,e.title),b===(b=k(e))&&N?N.p(a,e):(N.d(1),(N=b(t,e)).c(),N.m(v,g))},i:function(t,e){y||this.m(t,e)},o:p,d:function(t){t&&i(a),N.d(),h(_,"click",x)}}}(this,this._state),this.root._oncreate.push(function(){w.call(e,{changed:n({},e._state),current:e._state}),function(){var t=this.get().key,e=this.root.get().params[t];void 0===e.title&&(e.title=e.value),this.set(e)}.call(e),e.fire("update",{changed:n({},e._state),current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),_(this._oncreate)),this._intro=!0}a(j.prototype,y),a(j.prototype,{setSelection:function(t){var e=this.get().key;this.root.setField(e,{value:"",field:t})},setValue:function(t){var e=this.get().key;this.root.setField(e,{value:t,field:""})}});var D=window.serverBase||"//maps.kosmosnimki.ru/";var L={sendReport:function(){var t=this,e=this.get(),a=e.checked,n=e.layerItems,s=e.hashCols,r=e.params,o=[],i=[];e.gmxMap.layers.forEach(function(t){if(t.getGmxProperties&&t._map){var e=t.getGmxProperties(),a={layerId:e.name};if(e.Temporal){var n=t.getDateInterval();n.beginDate&&(a.beginDate=n.beginDate),n.endDate&&(a.endDate=n.endDate)}i.push(a)}}),n.forEach(function(e){var n=e[s.gmx_id];if(a[n]){var l={featureID:n};Object.entries(r).forEach(function(a){var n=a[0],r=a[1],o=t.changedParams[n]||{};l[n]="string"==typeof o?o:o.field?e[s[o.field]]:o.value||r.value}),l.satLayers=i,o.push(l)}}),console.log("sendReport ____ ",o,this.changedParams)},startDrawing:function(){console.log("startDrawing ____ ",this)},setField:function(t,e){this.changedParams[t]=e},setNodeField:function(t,e){var a,n=t.options?t.options[t.selectedIndex].value:t.value;this.setField(t.name,n),e&&this.set(((a={})[t.name]=n,a))},colsToHash:function(t){return t.reduce(function(t,e,a){return t[e]=a,t},{})},loadFeatures:function(t){var e=this;return fetch(D+"VectorLayer/Search.ashx?layer="+t+"&WrapStyle=None",{mode:"cors",credentials:"include"}).then(function(t){return t.json()}).then(function(t){if("ok"===t.Status){var a=t.Result.fields;e.set({cols:a,hashCols:e.colsToHash(a),layerItems:t.Result.values})}}).catch(function(t){return console.log(t)})},getReportsCount:function(){var t=this;return fetch(D+"plugins/forestreport/rest/GetCurrentUserInfo?WrapStyle=None",{mode:"cors",credentials:"include"}).then(function(t){return t.json()}).then(function(e){if("ok"===e.Status){var a=e.Result.limit-e.Result.used;t.set({limit:a>0?a:0})}}).catch(function(t){return console.log(t)})}};function R(t){var e=t.changed,a=t.current;t.previous;console.log("in onstate",this),e.layerID&&a.layerID&&this.loadFeatures(a.layerID)}function O(t,e){var a,n,s,l,d=e.it.title;return{c:function(){a=c("option"),n=u(d),a.__value=s=e.it.id,a.value=a.__value,a.selected=l=e.layerID===e.it.id,a.className="svelte-10wd7m9"},m:function(t,e){o(a,t,e),r(n,a)},p:function(t,e){t.layerIds&&d!==(d=e.it.title)&&f(n,d),t.layerIds&&s!==(s=e.it.id)&&(a.__value=s),a.value=a.__value,(t.layerID||t.layerIds)&&l!==(l=e.layerID===e.it.id)&&(a.selected=l)},d:function(t){t&&i(a)}}}function S(t,e){for(var a,n=e.layerIds,s=[],r=0;r<n.length;r+=1)s[r]=O(0,G(e,n,r));return{c:function(){for(var t=0;t<s.length;t+=1)s[t].c();a=d()},m:function(t,e){for(var n=0;n<s.length;n+=1)s[n].m(t,e);o(a,t,e)},p:function(t,e){if(t.layerIds||t.layerID){n=e.layerIds;for(var r=0;r<n.length;r+=1){var o=G(e,n,r);s[r]?s[r].p(t,o):(s[r]=O(0,o),s[r].c(),s[r].m(a.parentNode,a))}for(;r<s.length;r+=1)s[r].d(1);s.length=n.length}},d:function(t){l(s,t),t&&i(a)}}}function P(t,e){var a,n,s,l=e.it;return{c:function(){a=c("option"),n=u(l),a.__value=s=e.it,a.value=a.__value,a.className="svelte-10wd7m9"},m:function(t,e){o(a,t,e),r(n,a)},p:function(t,e){t.params&&l!==(l=e.it)&&f(n,l),t.params&&s!==(s=e.it)&&(a.__value=s),a.value=a.__value},d:function(t){t&&i(a)}}}function M(t,e){var a,n,l,d={key:"fellingForm",cols:e.cols},m=new j({root:t.root,store:t.store,data:d}),h={key:"fellingType",cols:e.cols},v=new j({root:t.root,store:t.store,data:h});return{c:function(){a=c("div"),m._fragment.c(),n=u("\n\t\t\t\t\t\t"),v._fragment.c()},m:function(t,e){o(a,t,e),m._mount(a,null),r(n,a),v._mount(a,null),l=!0},p:function(t,e){var a={};t.cols&&(a.cols=e.cols),m._set(a);var n={};t.cols&&(n.cols=e.cols),v._set(n)},i:function(t,e){l||this.m(t,e)},o:function(t){l&&(t=s(t,2),m._fragment.o(t),v._fragment.o(t),l=!1)},d:function(t){t&&i(a),m.destroy(),v.destroy()}}}function E(t,e){var a,n,s,l,d=e.it.title;return{c:function(){a=c("option"),n=u(d),a.__value=s=e.it.id,a.value=a.__value,a.selected=l=e.quadrantLayerId===e.it.id,a.className="svelte-10wd7m9"},m:function(t,e){o(a,t,e),r(n,a)},p:function(t,e){t.quadrantIds&&d!==(d=e.it.title)&&f(n,d),t.quadrantIds&&s!==(s=e.it.id)&&(a.__value=s),a.value=a.__value,(t.quadrantLayerId||t.quadrantIds)&&l!==(l=e.quadrantLayerId===e.it.id)&&(a.selected=l)},d:function(t){t&&i(a)}}}function K(t,e){for(var a,n=e.quadrantIds,s=[],r=0;r<n.length;r+=1)s[r]=E(0,V(e,n,r));return{c:function(){for(var t=0;t<s.length;t+=1)s[t].c();a=d()},m:function(t,e){for(var n=0;n<s.length;n+=1)s[n].m(t,e);o(a,t,e)},p:function(t,e){if(t.quadrantIds||t.quadrantLayerId){n=e.quadrantIds;for(var r=0;r<n.length;r+=1){var o=V(e,n,r);s[r]?s[r].p(t,o):(s[r]=E(0,o),s[r].c(),s[r].m(a.parentNode,a))}for(;r<s.length;r+=1)s[r].d(1);s.length=n.length}},d:function(t){l(s,t),t&&i(a)}}}function A(t,e){for(var a,n,d,g,p,_,y,k,b,N,x,I,w,T,q,z,F,D,L,R,O,S,E,A,G,V,B,W,Q,U,J,X,Y,Z,$,tt,et,at,nt,st,rt,ot,it,lt,ct,ut,dt,mt,ht,vt,ft,gt,pt,_t,yt,kt,bt,Nt,xt,It,Ct,wt=e.params.reportType.title,Tt=e.params.organizationName.title||e.params.organizationName.value,qt=e.params.inn.title||e.params.inn.value,zt=e.params.quadrantLayerId.title||e.params.quadrantLayerId.value,Ft=e.Object.keys(e.checked).length,jt=e.layerItems.length,Dt=e.params.reportType.options,Lt=[],Rt=0;Rt<Dt.length;Rt+=1)Lt[Rt]=P(0,H(e,Dt,Rt));function Ot(e){t.setNodeField(this,!0)}var St="о восстановлении лесов"!==e.reportType&&M(t,e);function Pt(e){t.setNodeField(this)}function Mt(e){t.setNodeField(this)}var Et={key:"region",cols:e.cols},Kt=new j({root:t.root,store:t.store,data:Et}),At={key:"forestry",cols:e.cols},Gt=new j({root:t.root,store:t.store,data:At}),Ht={key:"sectionForestry",cols:e.cols},Vt=new j({root:t.root,store:t.store,data:Ht}),Bt={key:"quadrant",cols:e.cols},Wt=new j({root:t.root,store:t.store,data:Bt}),Qt={key:"stratum",cols:e.cols},Ut=new j({root:t.root,store:t.store,data:Qt}),Jt={key:"site",cols:e.cols},Xt=new j({root:t.root,store:t.store,data:Jt}),Yt={key:"recoveryEventType",cols:e.cols},Zt=new j({root:t.root,store:t.store,data:Yt}),$t={key:"siteArea",cols:e.cols},te=new j({root:t.root,store:t.store,data:$t}),ee={key:"scale",cols:e.cols},ae=new j({root:t.root,store:t.store,data:ee}),ne=e.quadrantIds&&K(0,e);function se(e){t.setNodeField(this,!0)}function re(e){t.startDrawing()}var oe={items:e.layerItems,hashCols:e.hashCols},ie=new C({root:t.root,store:t.store,data:oe});function le(e){t.sendReport()}return{c:function(){a=c("div"),n=c("div"),(d=c("div")).textContent="Ввод информации",g=u("\n\t\t\t"),p=c("div"),_=c("div"),y=c("div"),k=c("div"),b=u(wt),N=u("\n\t\t\t\t\t\t"),x=c("select");for(var t=0;t<Lt.length;t+=1)Lt[t].c();I=u("\n"),St&&St.c(),w=u("\n\t\t\t\t\t"),T=c("div"),q=c("div"),z=u(Tt),F=u("\n\t\t\t\t\t\t"),D=c("input"),R=u("\n\t\t\t\t\t"),O=c("div"),S=c("div"),E=u(qt),A=u("\n\t\t\t\t\t\t"),G=c("input"),B=u("\n\n\t\t\t\t\t"),Kt._fragment.c(),W=u("\n\t\t\t\t\t"),Gt._fragment.c(),Q=u("\n\t\t\t\t\t"),Vt._fragment.c(),U=u("\n\t\t\t\t\t"),Wt._fragment.c(),J=u("\n\t\t\t\t\t"),Ut._fragment.c(),X=u("\n\t\t\t\t\t"),Xt._fragment.c(),Y=u("\n\t\t\t\t\t"),Zt._fragment.c(),Z=u("\n\t\t\t\t\t"),te._fragment.c(),$=u("\n\t\t\t\t\t"),ae._fragment.c(),tt=u("\n\n\t\t\t\t\t"),et=c("div"),at=c("div"),nt=u(zt),st=u("\n\t\t\t\t\t\t"),rt=c("select"),ot=c("option"),ne&&ne.c(),it=u("\n\t\t\t"),(lt=c("div")).textContent="Список объектов",ct=u("\n\t\t\t"),ut=c("div"),dt=c("div"),mt=c("div"),(ht=c("button")).textContent="Выделите участки полигоном",vt=u("\n\t\t\t\t\t"),ft=c("div"),gt=u("Выделено: "),pt=u(Ft),_t=u(" / "),yt=u(jt),kt=u("\n\t\t\t\t\t"),ie._fragment.c(),bt=u("\n\t\t\t"),Nt=c("div"),(xt=c("button")).textContent="Создать отчеты",d.className="gmx-sidebar-label-medium svelte-10wd7m9",k.className="gmx-sidebar-label svelte-10wd7m9",m(x,"change",Ot),x.name="reportType",x.className="gmx-sidebar-select-large svelte-10wd7m9",y.className="gmx-sidebar-labeled-block svelte-10wd7m9",q.className="gmx-sidebar-label-small svelte-10wd7m9",m(D,"change",Pt),D.name="organizationName",D.value=L=e.params.organizationName.value,v(D,"type","text"),D.className="gmx-sidebar-input-large svelte-10wd7m9",T.className="gmx-sidebar-labeled-block svelte-10wd7m9",S.className="gmx-sidebar-label-small svelte-10wd7m9",m(G,"change",Mt),G.name="inn",G.value=V=e.params.inn.value,v(G,"type","text"),G.className="gmx-sidebar-input-large svelte-10wd7m9",O.className="gmx-sidebar-labeled-block svelte-10wd7m9",at.className="gmx-sidebar-label svelte-10wd7m9",ot.__value="",ot.value=ot.__value,ot.className="svelte-10wd7m9",m(rt,"change",se),rt.name="quadrantLayerId",rt.className="gmx-sidebar-select-large svelte-10wd7m9",et.className="gmx-sidebar-labeled-block svelte-10wd7m9",lt.className="gmx-sidebar-label-medium svelte-10wd7m9",m(ht,"click",re),ht.className="gmx-sidebar-button svelte-10wd7m9",mt.className="gmx-geometry-select-container svelte-10wd7m9",ft.className="gmx-sidebar-label-medium svelte-10wd7m9",ut.className="forest-features-block svelte-10wd7m9",m(xt,"click",le),xt.className=It="gmx-sidebar-button"+(e.Object.keys(e.checked).length?"":"-disabled")+" svelte-10wd7m9",Nt.className="gmx-button-container svelte-10wd7m9",a.className="leftContent forest-plugin-content svelte-10wd7m9"},m:function(t,e){o(a,t,e),r(n,a),r(d,n),r(g,n),r(p,n),r(_,p),r(y,_),r(k,y),r(b,k),r(N,y),r(x,y);for(var s=0;s<Lt.length;s+=1)Lt[s].m(x,null);r(I,_),St&&St.m(_,null),r(w,_),r(T,_),r(q,T),r(z,q),r(F,T),r(D,T),r(R,_),r(O,_),r(S,O),r(E,S),r(A,O),r(G,O),r(B,_),Kt._mount(_,null),r(W,_),Gt._mount(_,null),r(Q,_),Vt._mount(_,null),r(U,_),Wt._mount(_,null),r(J,_),Ut._mount(_,null),r(X,_),Xt._mount(_,null),r(Y,_),Zt._mount(_,null),r(Z,_),te._mount(_,null),r($,_),ae._mount(_,null),r(tt,_),r(et,_),r(at,et),r(nt,at),r(st,et),r(rt,et),r(ot,rt),ne&&ne.m(rt,null),r(it,n),r(lt,n),r(ct,n),r(ut,n),r(dt,ut),r(mt,dt),r(ht,mt),r(vt,dt),r(ft,dt),r(gt,ft),r(pt,ft),r(_t,ft),r(yt,ft),r(kt,dt),ie._mount(dt,null),r(bt,n),r(Nt,n),r(xt,Nt),Ct=!0},p:function(e,a){if(Ct&&!e.params||wt===(wt=a.params.reportType.title)||f(b,wt),e.params){Dt=a.params.reportType.options;for(var n=0;n<Dt.length;n+=1){var s=H(a,Dt,n);Lt[n]?Lt[n].p(e,s):(Lt[n]=P(0,s),Lt[n].c(),Lt[n].m(x,null))}for(;n<Lt.length;n+=1)Lt[n].d(1);Lt.length=Dt.length}"о восстановлении лесов"!==a.reportType?(St?St.p(e,a):(St=M(t,a))&&St.c(),St.i(_,w)):St&&St.o(function(){St.d(1),St=null}),Ct&&!e.params||Tt===(Tt=a.params.organizationName.title||a.params.organizationName.value)||f(z,Tt),Ct&&!e.params||L===(L=a.params.organizationName.value)||(D.value=L),Ct&&!e.params||qt===(qt=a.params.inn.title||a.params.inn.value)||f(E,qt),Ct&&!e.params||V===(V=a.params.inn.value)||(G.value=V);var r={};e.cols&&(r.cols=a.cols),Kt._set(r);var o={};e.cols&&(o.cols=a.cols),Gt._set(o);var i={};e.cols&&(i.cols=a.cols),Vt._set(i);var l={};e.cols&&(l.cols=a.cols),Wt._set(l);var c={};e.cols&&(c.cols=a.cols),Ut._set(c);var u={};e.cols&&(u.cols=a.cols),Xt._set(u);var d={};e.cols&&(d.cols=a.cols),Zt._set(d);var m={};e.cols&&(m.cols=a.cols),te._set(m);var h={};e.cols&&(h.cols=a.cols),ae._set(h),Ct&&!e.params||zt===(zt=a.params.quadrantLayerId.title||a.params.quadrantLayerId.value)||f(nt,zt),a.quadrantIds?ne?ne.p(e,a):((ne=K(0,a)).c(),ne.m(rt,null)):ne&&(ne.d(1),ne=null),Ct&&!e.Object&&!e.checked||Ft===(Ft=a.Object.keys(a.checked).length)||f(pt,Ft),Ct&&!e.layerItems||jt===(jt=a.layerItems.length)||f(yt,jt);var v={};e.layerItems&&(v.items=a.layerItems),e.hashCols&&(v.hashCols=a.hashCols),ie._set(v),Ct&&!e.Object&&!e.checked||It===(It="gmx-sidebar-button"+(a.Object.keys(a.checked).length?"":"-disabled")+" svelte-10wd7m9")||(xt.className=It)},i:function(t,e){Ct||this.m(t,e)},o:function(t){Ct&&(t=s(t,11),St?St.o(t):t(),Kt._fragment.o(t),Gt._fragment.o(t),Vt._fragment.o(t),Wt._fragment.o(t),Ut._fragment.o(t),Xt._fragment.o(t),Zt._fragment.o(t),te._fragment.o(t),ae._fragment.o(t),ie._fragment.o(t),Ct=!1)},d:function(t){t&&i(a),l(Lt,t),h(x,"change",Ot),St&&St.d(),h(D,"change",Pt),h(G,"change",Mt),Kt.destroy(),Gt.destroy(),Vt.destroy(),Wt.destroy(),Ut.destroy(),Xt.destroy(),Zt.destroy(),te.destroy(),ae.destroy(),ne&&ne.d(),h(rt,"change",se),h(ht,"click",re),ie.destroy(),h(xt,"click",le)}}}function G(t,e,a){var n=Object.create(t);return n.it=e[a],n.each_value=e,n.it_index=a,n}function H(t,e,a){var n=Object.create(t);return n.it=e[a],n.each_value_1=e,n.it_index_1=a,n}function V(t,e,a){var n=Object.create(t);return n.it=e[a],n.each_value_2=e,n.it_index_2=a,n}function B(t){var e=this;g(this,t),this._state=a(a({Object:Object},{params:{layerID:{value:"",title:"Выбор слоя"},quadrantLayerId:{value:"",title:"Слой квартальной сети"},reportType:{value:"",options:["об использовании лесов","о восстановлении лесов"],title:"Тип отчета"},organizationName:{value:"Наименование организации"},inn:{value:"1234567890",title:"ИНН"},region:{value:"Субъект",title:"Субъект Российской Федерации"},forestry:{value:"Лесничество"},sectionForestry:{value:"Участковое лесничество"},quadrant:{value:"Квартал"},stratum:{value:"Выдел"},fellingForm:{value:"",title:"Форма рубки"},fellingType:{value:"",title:"Тип рубки"},recoveryEventType:{value:"",title:"Тип мероприятия"},siteArea:{value:"Площадь"},scale:{value:"Масштаб"},site:{value:"Делянка"}},layerItems:[],limit:0,layerID:"",reportType:"",checked:{},layerIds:[],quadrantIds:[],hashCols:{},cols:[]}),t.data),this._intro=!!t.intro,this._handlers.state=[R],t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=function(t,e){var a,n,s,l,d,v,g,p,_,y,k,b,N,x,I=e.layerIds&&S(0,e);function C(e){t.setNodeField(this,!0)}var w=e.layerID&&A(t,e);return{c:function(){a=c("div"),(n=c("div")).textContent="Отчет об использовании лесов",s=u("\n\t"),l=c("div"),d=u("Лимит отчетов: "),v=u(e.limit),g=u("\n\t"),p=c("div"),(_=c("span")).textContent="Выбор слоя",y=u("\n\t\t"),k=c("select"),b=c("option"),I&&I.c(),N=u("\n"),w&&w.c(),n.className="forest-plugin-header svelte-10wd7m9",l.className="forest-plugin-header svelte-10wd7m9",_.className="gmx-select-layer-container__label svelte-10wd7m9",b.__value="",b.value=b.__value,b.className="svelte-10wd7m9",m(k,"change",C),k.name="layerID",k.className="gmx-sidebar-select-medium svelte-10wd7m9",p.className="gmx-select-layer-container svelte-10wd7m9",a.dataset.reactroot="",a.className="forest-plugin-container svelte-10wd7m9"},m:function(t,e){o(a,t,e),r(n,a),r(s,a),r(l,a),r(d,l),r(v,l),r(g,a),r(p,a),r(_,p),r(y,p),r(k,p),r(b,k),I&&I.m(k,null),r(N,a),w&&w.m(a,null),x=!0},p:function(e,n){x&&!e.limit||f(v,n.limit),n.layerIds?I?I.p(e,n):((I=S(0,n)).c(),I.m(k,null)):I&&(I.d(1),I=null),n.layerID?(w?w.p(e,n):(w=A(t,n))&&w.c(),w.i(a,null)):w&&w.o(function(){w.d(1),w=null})},i:function(t,e){x||this.m(t,e)},o:function(t){x&&(w?w.o(t):t(),x=!1)},d:function(t){t&&i(a),I&&I.d(),h(k,"change",C),w&&w.d()}}}(this,this._state),this.root._oncreate.push(function(){R.call(e,{changed:n({},e._state),current:e._state}),function(){this.changedParams={};var t=this.get(),e=t.meta,a=t.gmxMap;this.getReportsCount(),console.log("in oncreate",a);var n=[],s=[];a.layers.forEach(function(t){if(t.getGmxProperties){var a=t.getGmxProperties(),r=a.MetaProperties||{};if("vector"===a.type.toLowerCase()&&"polygon"===a.GeometryType.toLowerCase()&&!a.IsRasterCatalog&&!a.Quicklook){var o={id:a.name,title:a.title};e?(r.forest&&"true"===r.forest.Value&&n.push(o),r.quadrant&&"true"===r.quadrant.Value&&s.push(o)):(n.push(o),s.push(o))}}}),this.set({layerIds:n,quadrantIds:s,cols:[]})}.call(e),e.fire("update",{changed:n({},e._state),current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,_(this._beforecreate),_(this._oncreate),_(this._aftercreate),this._lock=!1),this._intro=!0}return a(B.prototype,y),a(B.prototype,L),t.App=B,t}({});
//# sourceMappingURL=forest.js.map
